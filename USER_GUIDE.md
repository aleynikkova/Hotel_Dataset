# ะัะบะพะฒะพะดััะฒะพ ะฟะพ ะธัะฟะพะปัะทะพะฒะฐะฝะธั ัะธััะตะผั ะฑัะพะฝะธัะพะฒะฐะฝะธั ะพัะตะปะตะน

## ะะพะปะธ ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะธ ะธั ััะฝะบัะธะพะฝะฐะป

### 1. ะะพััั (Guest)

#### ะะพัััะฟะฝัะน ััะฝะบัะธะพะฝะฐะป:
- โ ะะตะณะธัััะฐัะธั ะธ ะฐะฒัะพัะธะทะฐัะธั
- โ ะัะพัะผะพัั ัะฟะธัะบะฐ ะพัะตะปะตะน
- โ ะัะพัะผะพัั ะดะพัััะฟะฝัั ะฝะพะผะตัะพะฒ
- โ ะคะธะปัััะฐัะธั ะฝะพะผะตัะพะฒ ะฟะพ ัะธะฟั, ัะตะฝะต ะธ ะดะฐัะต
- โ ะกะพะทะดะฐะฝะธะต ะฑัะพะฝะธัะพะฒะฐะฝะธั
- โ ะัะพัะผะพัั ัะฒะพะธั ะฑัะพะฝะธัะพะฒะฐะฝะธะน ั ัะธะปัััะฐะผะธ
- โ ะัะผะตะฝะฐ ะฑัะพะฝะธัะพะฒะฐะฝะธั (ะดะพ ะดะฐัั ะทะฐะตะทะดะฐ)
- โ ะะพะฑะฐะฒะปะตะฝะธะต ะพัะทัะฒะฐ ะฟะพัะปะต ะทะฐะฒะตััะตะฝะฝะพะณะพ ะฟัะพะถะธะฒะฐะฝะธั

#### ะขะตััะพะฒัะต ะดะฐะฝะฝัะต:
```
Email: ivan.petrov@mail.ru
Password: guest123
```

#### API ัะฝะดะฟะพะธะฝัั:
```bash
# ะะฒัะพัะธะทะฐัะธั
POST /api/v1/auth/login
Body: username=ivan.petrov@mail.ru&password=guest123

# ะัะพัะผะพัั ะพัะตะปะตะน
GET /api/v1/hotels/

# ะัะพัะผะพัั ะฝะพะผะตัะพะฒ ะพัะตะปั
GET /api/v1/rooms/hotel/{hotel_id}

# ะกะพะทะดะฐะฝะธะต ะฑัะพะฝะธัะพะฒะฐะฝะธั
POST /api/v1/bookings/
Body: {
  "room_id": 2,
  "check_in_date": "2025-12-25",
  "check_out_date": "2025-12-30",
  "guests_count": 2
}

# ะัะพัะผะพัั ัะฒะพะธั ะฑัะพะฝะธัะพะฒะฐะฝะธะน
GET /api/v1/bookings/my

# ะคะธะปัััะฐัะธั ะฟะพ ััะฐัััั
GET /api/v1/bookings/my?status=confirmed

# ะัะผะตะฝะฐ ะฑัะพะฝะธัะพะฒะฐะฝะธั
DELETE /api/v1/bookings/{booking_id}

# ะะพะฑะฐะฒะปะตะฝะธะต ะพัะทัะฒะฐ
POST /api/v1/reviews/
Body: {
  "hotel_id": 1,
  "rating": 5,
  "comment": "ะัะปะธัะฝัะน ะพัะตะปั!"
}
```

---

### 2. ะะดะผะธะฝะธัััะฐัะพั ะพัะตะปั (Hotel Admin)

#### ะะพัััะฟะฝัะน ััะฝะบัะธะพะฝะฐะป:
- โ ะฃะฟัะฐะฒะปะตะฝะธะต ะฝะพะผะตัะฐะผะธ ัะฒะพะตะณะพ ะพัะตะปั
  - ะะพะฑะฐะฒะปะตะฝะธะต ะฝะพะผะตัะพะฒ
  - ะะตะดะฐะบัะธัะพะฒะฐะฝะธะต ะฝะพะผะตัะพะฒ
  - ะฃะดะฐะปะตะฝะธะต ะฝะพะผะตัะพะฒ
- โ ะฃะฟัะฐะฒะปะตะฝะธะต ัะธะฟะฐะผะธ ะฝะพะผะตัะพะฒ
  - ะกะพะทะดะฐะฝะธะต ัะธะฟะพะฒ
  - ะะตะดะฐะบัะธัะพะฒะฐะฝะธะต ัะธะฟะพะฒ
  - ะฃะดะฐะปะตะฝะธะต ัะธะฟะพะฒ
- โ ะฃะฟัะฐะฒะปะตะฝะธะต ัะดะพะฑััะฒะฐะผะธ ะฝะพะผะตัะพะฒ
  - ะะฐะทะฝะฐัะตะฝะธะต ัะดะพะฑััะฒ
  - ะฃะดะฐะปะตะฝะธะต ัะดะพะฑััะฒ
- โ ะัะพัะผะพัั ะฒัะตั ะฑัะพะฝะธัะพะฒะฐะฝะธะน ะฟะพ ะพัะตะปั
- โ ะะทะผะตะฝะตะฝะธะต ััะฐัััะพะฒ ะฑัะพะฝะธัะพะฒะฐะฝะธะน
- โ ะคะพัะผะธัะพะฒะฐะฝะธะต ะพััะตัะพะฒ
  - ะััะตั ะฟะพ ะทะฐะณััะทะบะต ะฝะพะผะตัะพะฒ
  - ะััะตั ะฟะพ ะฑัะพะฝะธัะพะฒะฐะฝะธัะผ
  - ะญะบัะฟะพัั ะฒ CSV

#### ะขะตััะพะฒัะต ะดะฐะฝะฝัะต:
```
Email: admin.plaza@hotel.ru
Password: admin123
```

#### API ัะฝะดะฟะพะธะฝัั:
```bash
# ะกะพะทะดะฐะฝะธะต ะฝะพะผะตัะฐ
POST /api/v1/rooms/
Body: {
  "hotel_id": 1,
  "roomtype_id": 1,
  "room_number": "101",
  "floor": 1,
  "price_per_night": 5000,
  "is_available": true,
  "description": "ะฃััะฝัะน ะฝะพะผะตั ั ะฒะธะดะพะผ ะฝะฐ ะณะพัะพะด",
  "amenity_ids": [1, 2, 3]
}

# ะะตะดะฐะบัะธัะพะฒะฐะฝะธะต ะฝะพะผะตัะฐ
PUT /api/v1/rooms/{room_id}
Body: {
  "price_per_night": 5500,
  "is_available": false
}

# ะฃะดะฐะปะตะฝะธะต ะฝะพะผะตัะฐ
DELETE /api/v1/rooms/{room_id}

# ะกะพะทะดะฐะฝะธะต ัะธะฟะฐ ะฝะพะผะตัะฐ
POST /api/v1/roomtypes/
Body: {
  "type_name": "ะัะบั",
  "description": "ะะพัะบะพัะฝัะน ะฝะพะผะตั",
  "max_occupancy": 4,
  "price_per_night": 15000
}

# ะัะพัะผะพัั ะฑัะพะฝะธัะพะฒะฐะฝะธะน ะพัะตะปั
GET /api/v1/bookings/hotel/{hotel_id}/all

# ะคะธะปัััะฐัะธั ะฟะพ ััะฐัััั
GET /api/v1/bookings/hotel/{hotel_id}/all?status=confirmed

# ะะทะผะตะฝะตะฝะธะต ััะฐัััะฐ ะฑัะพะฝะธัะพะฒะฐะฝะธั
PUT /api/v1/bookings/{booking_id}
Body: {
  "status": "checked_in"
}

# ะััะตั ะฟะพ ะทะฐะณััะทะบะต ะฝะพะผะตัะพะฒ
GET /api/v1/reports/room-occupancy?hotel_id=1&start_date=2025-01-01&end_date=2025-12-31

# ะััะตั ะฟะพ ะฑัะพะฝะธัะพะฒะฐะฝะธัะผ
GET /api/v1/reports/bookings?hotel_id=1&status=confirmed

# ะญะบัะฟะพัั ะฒ CSV
GET /api/v1/reports/bookings/export?hotel_id=1
```

---

### 3. ะกะธััะตะผะฝัะน ะฐะดะผะธะฝะธัััะฐัะพั (System Admin)

#### ะะพัััะฟะฝัะน ััะฝะบัะธะพะฝะฐะป:
- โ ะฃะฟัะฐะฒะปะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปัะผะธ
  - ะัะพัะผะพัั ะฒัะตั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
  - ะกะพะทะดะฐะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปะตะน
  - ะะปะพะบะธัะพะฒะบะฐ/ัะฐะทะฑะปะพะบะธัะพะฒะบะฐ
  - ะะฐะทะฝะฐัะตะฝะธะต ัะพะปะตะน
  - ะฃะดะฐะปะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปะตะน
- โ ะฃะฟัะฐะฒะปะตะฝะธะต ะพัะตะปัะผะธ
  - ะะพะฑะฐะฒะปะตะฝะธะต ะพัะตะปะตะน
  - ะะตะดะฐะบัะธัะพะฒะฐะฝะธะต ะพัะตะปะตะน
  - ะฃะดะฐะปะตะฝะธะต ะพัะตะปะตะน
- โ ะฃะฟัะฐะฒะปะตะฝะธะต ัะดะพะฑััะฒะฐะผะธ
  - ะะพะฑะฐะฒะปะตะฝะธะต ัะดะพะฑััะฒ
  - ะะตะดะฐะบัะธัะพะฒะฐะฝะธะต ัะดะพะฑััะฒ
  - ะฃะดะฐะปะตะฝะธะต ัะดะพะฑััะฒ
- โ ะัะพัะผะพัั ะฒัะตั ะพััะตัะพะฒ ัะธััะตะผั

#### ะขะตััะพะฒัะต ะดะฐะฝะฝัะต:
```
Email: admin@hotel.com
Password: admin123
```

#### API ัะฝะดะฟะพะธะฝัั:
```bash
# ะัะพัะผะพัั ะฒัะตั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
GET /api/v1/users/

# ะกะพะทะดะฐะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั
POST /api/v1/users/
Body: {
  "email": "newuser@example.com",
  "password": "password123",
  "first_name": "ะะฒะฐะฝ",
  "last_name": "ะะฒะฐะฝะพะฒ",
  "phone": "+7-999-123-4567",
  "role": "guest"
}

# ะะปะพะบะธัะพะฒะบะฐ ะฟะพะปัะทะพะฒะฐัะตะปั
POST /api/v1/users/{user_id}/block

# ะะฐะทะฑะปะพะบะธัะพะฒะบะฐ ะฟะพะปัะทะพะฒะฐัะตะปั
POST /api/v1/users/{user_id}/unblock

# ะะทะผะตะฝะตะฝะธะต ัะพะปะธ
PATCH /api/v1/users/{user_id}/role?role=hotel_admin

# ะกะพะทะดะฐะฝะธะต ะพัะตะปั
POST /api/v1/hotels/
Body: {
  "name": "ะะพะฒัะน ะพัะตะปั",
  "address": "ัะป. ะัะธะผะตัะฝะฐั, 1",
  "city": "ะะพัะบะฒะฐ",
  "country": "ะะพััะธั",
  "phone": "+7-495-123-4567",
  "email": "info@newhotel.ru",
  "star_rating": 4,
  "description": "ะกะพะฒัะตะผะตะฝะฝัะน ะพัะตะปั ะฒ ัะตะฝััะต ะณะพัะพะดะฐ"
}

# ะะตะดะฐะบัะธัะพะฒะฐะฝะธะต ะพัะตะปั
PATCH /api/v1/hotels/{hotel_id}
Body: {
  "star_rating": 5,
  "description": "ะะฑะฝะพะฒะปะตะฝะฝะพะต ะพะฟะธัะฐะฝะธะต"
}

# ะฃะดะฐะปะตะฝะธะต ะพัะตะปั
DELETE /api/v1/hotels/{hotel_id}

# ะกะพะทะดะฐะฝะธะต ัะดะพะฑััะฒะฐ
POST /api/v1/amenities/
Body: {
  "amenity_name": "ะะถะฐะบัะทะธ",
  "description": "ะะฐะฝะฝะฐ ั ะณะธะดัะพะผะฐััะฐะถะตะผ"
}

# ะะฐะทะฝะฐัะตะฝะธะต ัะดะพะฑััะฒะฐ ะฝะพะผะตัั
POST /api/v1/amenities/room/{room_id}/amenity/{amenity_id}

# ะัะพัะผะพัั ะฒัะตั ะพััะตัะพะฒ
GET /api/v1/reports/bookings
GET /api/v1/reports/room-occupancy
```

---

## ะกัะฐัััั ะฑัะพะฝะธัะพะฒะฐะฝะธะน

- **pending** - ะะถะธะดะฐะตั ะฟะพะดัะฒะตัะถะดะตะฝะธั
- **confirmed** - ะะพะดัะฒะตัะถะดะตะฝะพ
- **checked_in** - ะะฐัะตะปะตะฝ
- **checked_out** - ะััะตะปะตะฝ
- **cancelled** - ะัะผะตะฝะตะฝะพ

---

## ะะฐะฑะพัะฐ ั ััะพะฝัะตะฝะดะพะผ

### ะกััะฐะฝะธัะฐ ะฑัะพะฝะธัะพะฒะฐะฝะธะน (my-bookings.html)

#### ะคัะฝะบัะธะธ:
1. **ะัะพัะผะพัั ะฑัะพะฝะธัะพะฒะฐะฝะธะน** - ะัะต ะฒะฐัะธ ะฑัะพะฝะธัะพะฒะฐะฝะธั ั ะฟะพะปะฝะพะน ะธะฝัะพัะผะฐัะธะตะน
2. **ะคะธะปัััะฐัะธั** - ะะพ ััะฐัััั ะฑัะพะฝะธัะพะฒะฐะฝะธั
3. **ะกะพััะธัะพะฒะบะฐ** - ะะพ ะดะฐัะต ัะพะทะดะฐะฝะธั ะธะปะธ ะดะฐัะต ะทะฐะตะทะดะฐ
4. **ะกัะฐัะธััะธะบะฐ** - ะะฑัะตะต ะบะพะปะธัะตััะฒะพ, ะฟะพะดัะฒะตัะถะดะตะฝะฝัะต, ะพะถะธะดะฐััะธะต, ััะผะผะฐ
5. **ะัะผะตะฝะฐ ะฑัะพะฝะธัะพะฒะฐะฝะธั** - ะะปั ะฟะพะดัะฒะตัะถะดะตะฝะฝัั ะฑัะพะฝะธัะพะฒะฐะฝะธะน ะดะพ ะดะฐัั ะทะฐะตะทะดะฐ
6. **ะััะฐะฒะธัั ะพัะทัะฒ** - ะะพัะปะต ะฒััะตะปะตะฝะธั

#### ะัะฟะพะปัะทะพะฒะฐะฝะธะต:
1. ะะฒัะพัะธะทัะนัะตัั ะฝะฐ ะณะปะฐะฒะฝะพะน ัััะฐะฝะธัะต
2. ะะตัะตะนะดะธัะต ะฒ "ะะพะธ ะฑัะพะฝะธัะพะฒะฐะฝะธั"
3. ะัะฟะพะปัะทัะนัะต ัะธะปัััั ะดะปั ะฟะพะธัะบะฐ ะฝัะถะฝัั ะฑัะพะฝะธัะพะฒะฐะฝะธะน
4. ะะฐะถะผะธัะต "ะะพะดัะพะฑะฝะตะต" ะดะปั ะดะตัะฐะปัะฝะพะน ะธะฝัะพัะผะฐัะธะธ
5. ะัะฟะพะปัะทัะนัะต "ะัะผะตะฝะธัั" ะดะปั ะพัะผะตะฝั (ะตัะปะธ ะดะพัััะฟะฝะพ)
6. ะััะฐะฒััะต ะพัะทัะฒ ะฟะพัะปะต ะฒััะตะปะตะฝะธั

---

## ะะฐะฟััะบ ัะธััะตะผั

### Backend:
```bash
cd backend
source venv/bin/activate  # ะธะปะธ venv\Scripts\activate ะฝะฐ Windows
python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

API ะดะพะบัะผะตะฝัะฐัะธั ะดะพัััะฟะฝะฐ ะฟะพ ะฐะดัะตัั: http://localhost:8000/docs

### Frontend:
ะัะบัะพะนัะต `index.html` ะฒ ะฑัะฐัะทะตัะต ะธะปะธ ะธัะฟะพะปัะทัะนัะต ะปะพะบะฐะปัะฝัะน ัะตัะฒะตั:
```bash
cd frontend
python -m http.server 8080
```

ะะฐัะตะผ ะพัะบัะพะนัะต http://localhost:8080

---

## ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั

### ะกะพะทะดะฐะฝะธะต ะฝะพะฒะพะณะพ ะฑัะพะฝะธัะพะฒะฐะฝะธั (Guest):
```bash
# 1. ะะฒัะพัะธะทะฐัะธั
TOKEN=$(curl -s -X POST http://localhost:8000/api/v1/auth/login \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "username=ivan.petrov@mail.ru&password=guest123" | \
  python3 -c "import sys, json; print(json.load(sys.stdin)['access_token'])")

# 2. ะัะพัะผะพัั ะดะพัััะฟะฝัั ะฝะพะผะตัะพะฒ
curl -s "http://localhost:8000/api/v1/rooms/hotel/1?available_from=2025-12-20&available_to=2025-12-25"

# 3. ะกะพะทะดะฐะฝะธะต ะฑัะพะฝะธัะพะฒะฐะฝะธั
curl -X POST http://localhost:8000/api/v1/bookings/ \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "room_id": 1,
    "check_in_date": "2025-12-20",
    "check_out_date": "2025-12-25",
    "guests_count": 2
  }'
```

### ะะพะปััะตะฝะธะต ะพััะตัะฐ (Hotel Admin):
```bash
# ะะฒัะพัะธะทะฐัะธั
TOKEN=$(curl -s -X POST http://localhost:8000/api/v1/auth/login \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "username=admin.plaza@hotel.ru&password=admin123" | \
  python3 -c "import sys, json; print(json.load(sys.stdin)['access_token'])")

# ะััะตั ะฟะพ ะทะฐะณััะทะบะต
curl -s "http://localhost:8000/api/v1/reports/room-occupancy?hotel_id=1&start_date=2025-01-01&end_date=2025-12-31" \
  -H "Authorization: Bearer $TOKEN"

# ะญะบัะฟะพัั ะฒ CSV
curl -s "http://localhost:8000/api/v1/reports/bookings/export?hotel_id=1" \
  -H "Authorization: Bearer $TOKEN" > bookings_report.csv
```

---

## Troubleshooting

### ะัะพะฑะปะตะผะฐ: "ะะต ัะดะฐะปะพัั ะทะฐะณััะทะธัั ะฑัะพะฝะธัะพะฒะฐะฝะธั"
**ะะตัะตะฝะธะต**: ะัะพะฒะตัััะต, ััะพ backend ะทะฐะฟััะตะฝ ะฝะฐ ะฟะพััั 8000

### ะัะพะฑะปะตะผะฐ: "Unauthorized"
**ะะตัะตะฝะธะต**: ะะฑะฝะพะฒะธัะต ัะพะบะตะฝ ะฐะฒัะพัะธะทะฐัะธะธ

### ะัะพะฑะปะตะผะฐ: "Room already booked"
**ะะตัะตะฝะธะต**: ะัะฑะตัะธัะต ะดััะณะธะต ะดะฐัั ะธะปะธ ะดััะณะพะน ะฝะพะผะตั

---

## ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
ะะ_ะะ/
โโโ backend/
โ   โโโ app/
โ   โ   โโโ api/v1/          # API ัะฝะดะฟะพะธะฝัั
โ   โ   โ   โโโ auth.py      # ะะฒัะพัะธะทะฐัะธั
โ   โ   โ   โโโ users.py     # ะะพะปัะทะพะฒะฐัะตะปะธ
โ   โ   โ   โโโ hotels.py    # ะัะตะปะธ
โ   โ   โ   โโโ rooms.py     # ะะพะผะตัะฐ
โ   โ   โ   โโโ roomtypes.py # ะขะธะฟั ะฝะพะผะตัะพะฒ
โ   โ   โ   โโโ amenities.py # ะฃะดะพะฑััะฒะฐ
โ   โ   โ   โโโ bookings.py  # ะัะพะฝะธัะพะฒะฐะฝะธั
โ   โ   โ   โโโ reviews.py   # ะัะทัะฒั
โ   โ   โ   โโโ reports.py   # ะััะตัั
โ   โ   โโโ core/            # ะะพะฝัะธะณััะฐัะธั ะธ ะะ
โ   โ   โโโ models/          # SQLAlchemy ะผะพะดะตะปะธ
โ   โ   โโโ schemas/         # Pydantic ััะตะผั
โ   โโโ requirements.txt
โโโ database/
โ   โโโ *.sql               # SQL ัะบัะธะฟัั
โโโ frontend/
    โโโ index.html          # ะะปะฐะฒะฝะฐั ัััะฐะฝะธัะฐ
    โโโ my-bookings.html    # ะกััะฐะฝะธัะฐ ะฑัะพะฝะธัะพะฒะฐะฝะธะน
    โโโ css/
    โโโ js/
```

---

ะกะธััะตะผะฐ ะฟะพะปะฝะพัััั ะณะพัะพะฒะฐ ะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั! ๐
